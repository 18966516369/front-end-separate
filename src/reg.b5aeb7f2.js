function afterTran(){function a(a,b){e[a]={},f[a]={},e[a].required=!0,f[a].required=b}function b(){$(".reg-code-img").attr("src","/validateCode?"+(new Date).getTime())}function c(){var a=getQueryString("affiliateId");if(a){var b=new Date;b.setMinutes((new Date).getMinutes()+30),$.cookie("refId",a,{expires:b})}else a=$.cookie("refId");a&&d(a)}function d(a){$("#affiliateId").val(a),$("#affiliateId-hidden").val(a)}var e={custCode:{remote:"/checkCustCode",required:!0,rangelength:[6,12],string:!0},passwd:{required:!0,rangelength:[6,12],string:!0},repasswd:{required:!0,equalTo:"#passwd",rangelength:[6,12],string:!0}},f={custCode:{remote:$.t("js.1"),required:$.t("js.2"),rangelength:$.t("js.3")},passwd:{required:$.t("js.4"),rangelength:$.t("js.5")},repasswd:{required:$.t("js.6"),equalTo:$.t("js.7")}};!function(){var b=$("#country");b.length&&b.parents(".reg-group").data("require")&&a("country",$.t("js.8")),b=$("#emailAddress"),b.length&&b.parents(".reg-group").data("require")&&(a("emailAddress",$.t("js.9")),b.parents(".reg-group").data("valid")&&(e.emailAddress.email=!0,f.emailAddress.email=$.t("js.10"))),b=$("#affiliateId"),b.length&&b.parents(".reg-group").data("require")&&(a("affiliateId",$.t("js.11")),b.parents(".reg-group").data("valid")&&(e.affiliateId.minlength=2,e.affiliateId.maxlength=50,f.affiliateId.minlength=$.t("js.12"),f.affiliateId.maxlength=$.t("js.13"))),b=$("#validateCode"),b.length&&b.parents(".reg-group").data("require")&&(a("validateCode",$.t("js.14")),b.parents(".reg-group").data("valid")&&(e.validateCode.remote="/checkValidateCode",e.validateCode.minlength=4,e.validateCode.maxlength=4,f.validateCode.remote=$.t("js.15"),f.validateCode.minlength=$.t("js.16"),f.validateCode.maxlength=$.t("js.17"))),b=$("#firstName"),b.length&&b.parents(".reg-group").data("require")&&(a("firstName",$.t("js.18")),b.parents(".reg-group").data("valid")&&(e.firstName.minlength=2,e.firstName.maxlength=6,e.firstName.zh=!0,f.firstName.minlength=$.t("js.19"),f.firstName.maxlength=$.t("js.20"))),b=$("#lastName"),b.length&&b.parents(".reg-group").data("require")&&(a("lastName",$.t("js.21")),b.parents(".reg-group").data("valid")&&(e.lastName.minlength=2,e.lastName.maxlength=20,e.lastName.zh=!0,f.lastName.minlength=$.t("js.22"),f.lastName.maxlength=$.t("js.23"))),b=$("#nickName"),b.length&&b.parents(".reg-group").data("require")&&(a("nickName",$.t("js.24")),b.parents(".reg-group").data("valid")&&(e.nickName.minlength=2,e.nickName.maxlength=30,e.nickName.chinese=!0,f.nickName.minlength=$.t("js.25"),f.nickName.maxlength=$.t("js.26"))),b=$("#enName"),b.length&&b.parents(".reg-group").data("require")&&(a("enName",$.t("js.27")),b.parents(".reg-group").data("valid")&&(e.enName.minlength=2,e.enName.maxlength=30,e.enName.en=!0,f.enName.minlength=$.t("js.28"),f.enName.maxlength=$.t("js.29"))),b=$("#birthDate"),b.length&&b.parents(".reg-group").data("require")&&(a("birthDate",$.t("js.30")),b.parents(".reg-group").data("valid")&&(e.birthDate.date=!0)),b=$("#qq"),b.length&&b.parents(".reg-group").data("require")&&(a("qq",$.t("js.31")),b.parents(".reg-group").data("valid")&&(e.qq.qq=!0)),b=$("#drawPwd"),b.length&&b.parents(".reg-group").data("require")&&(a("drawPwd",$.t("js.32")),b.parents(".reg-group").data("valid")&&(e.drawPwd.maxlength=16,f.drawPwd.maxlength=$.t("js.33"))),b=$("#mobileNumber"),b.length&&b.parents(".reg-group").data("require")&&(a("mobileNumber",$.t("js.34")),b.parents(".reg-group").data("valid")&&(e.mobileNumber.phone=!0)),b=$("#certificateType"),b.length&&b.parents(".reg-group").data("require")&&a("certificateType",$.t("js.35")),b=$("#certificate"),b.length&&b.parents(".reg-group").data("require")&&(a("certificate",$.t("js.36")),b.parents(".reg-group").data("valid")&&(e.certificate.cardno=!0))}(),$("#reg-form").validate($.extend({},validBase,{rules:e,messages:f})),$("#email").mailAutoComplete(),$("#birthDate").prop("readonly","readonly").datepicker({changeMonth:!0,changeYear:!0,yearRange:"1960:"+(new Date).getFullYear(),onSelect:function(a,b){$(b.input).trigger("blur")}}),$("#reg-btn").click(function(){$(this).commit($("#reg-form"),"/register",function(){location.href="/register_success"})}),$("#reg-form").keyup(function(a){13==a.keyCode&&$("#reg-btn").trigger("click")}),$(".reg-code-img").click(function(){b()}),c()}